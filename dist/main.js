(()=>{"use strict";var e={container:document.getElementsByTagName("ul")[0]},t={updateStorage:function(e){for(var t=0;t<Object.keys(e).length;t+=1){var a=Object.keys(e)[t],n=localStorage.getItem(a)?localStorage.getItem(a).split(","):[];n.push(e[a]),localStorage.setItem(a,n)}},getStorage:function(){for(var e=localStorage.getItem("description")?localStorage.getItem("description").split(","):[],t=localStorage.getItem("status")?localStorage.getItem("status").split(","):[],a=localStorage.getItem("index")?localStorage.getItem("index").split(","):[],n=[],i=0;i<a.length;i+=1)n[i]=[e[i],t[i],a[i]];return n.sort((function(e,t){return e[2]>t[2]?1:-1})),n},updateDOM:function(){for(var a=t.getStorage(),n=0;n<a.length;n+=1){var i=a[n][0],s="true"===a[n][1],r=e.container.children[n].firstChild.lastChild;e.container.children[n].firstChild.firstChild.checked=s,r.textContent=i}}};const a=t;var n={items:document.getElementsByTagName("li"),container:document.getElementsByTagName("ul")[0]};const i=function(e){var t=document.getElementsByClassName("ontop")[0],i=document.getElementsByClassName("onbottom")[0],s=Array.prototype.indexOf.call(n.container.children,t),r=a.getStorage(),l=r.splice(s,1);r.splice(e,0,l[0]),localStorage.clear();for(var o=0;o<r.length;o+=1){var d={description:r[o][0],status:r[o][1],index:o};a.updateStorage(d)}t.classList.remove("ontop"),i.classList.remove("onbottom"),a.updateDOM()},s=function(e,t){e.preventDefault(),t.classList.add("onbottom")},r=function(e,t){var n=a.getStorage();n[t][1]=e.checked,localStorage.clear();for(var i=0;i<n.length;i+=1){var s={description:n[i][0],status:n[i][1],index:n[i][2]};a.updateStorage(s)}a.updateDOM()};var l={items:document.getElementsByTagName("li")},o={editName:function(e){l.items[e].setAttribute("draggable","false");var t=l.items[e].firstChild.lastChild;t.style.display="none";var a=document.createElement("input");a.className="input-field",a.value=t.textContent,l.items[e].firstChild.appendChild(a),a.focus();var n=l.items[e].lastChild,i=l.items[e].getElementsByClassName("fa-ellipsis-v")[0];i.classList.add("invisible"),n.classList.remove("invisible"),a.addEventListener("keypress",(function(s){"Enter"===s.key&&o.updateName(t,a,e,i,n)}))},updateName:function(e,t,n,i,s){var r=a.getStorage();r[n][0]=t.value,localStorage.clear();for(var o=0;o<r.length;o+=1){var d={description:r[o][0],status:r[o][1],index:r[o][2]};a.updateStorage(d)}l.items[n].firstChild.contains(t)&&l.items[n].firstChild.removeChild(t),e.style.display="block",l.items[n].setAttribute("draggable","true"),i.classList.remove("invisible"),s.classList.add("invisible"),a.updateDOM()}};const d=o;var c={container:document.getElementsByTagName("ul")[0],items:document.getElementsByTagName("li")},g={deleteItem:function(e){var t=c.items[e],n=a.getStorage();n.splice(e,1),localStorage.clear();for(var i=0;i<n.length;i+=1){var s={description:n[i][0],status:n[i][1],index:i};a.updateStorage(s)}t.remove(),this.addListeners()},deleteChecked:function(){for(var e=a.getStorage(),t=e.length-1;t>=0;t-=1){var n=c.items[t];n.firstElementChild.firstElementChild.checked&&n.remove()}var i=e.filter((function(e){return"false"===e[1]}));localStorage.clear();for(var s=0;s<i.length;s+=1){var r={description:i[s][0],status:i[s][1],index:s};a.updateStorage(r)}this.addListeners()},addListeners:function(){var e=a.getStorage();c.container.innerHTML="";for(var t=function(t){var a=document.createElement("li");a.draggable=!0;var n="true"===e[t][1]?"checked":"";a.innerHTML="<nav><input type='checkbox' ".concat(n," class='status' name='completed'><p>").concat(e[t][0],'</p></nav><i class="fas fa-ellipsis-v"></i><i class="fas fa-trash-alt invisible"></i>'),c.container.appendChild(a),a.addEventListener("dragstart",(function(){a.classList.add("ontop")})),a.addEventListener("drop",(function(){i(t)})),a.addEventListener("dragover",(function(e){s(e,a)})),a.addEventListener("dragleave",(function(){a.classList.remove("onbottom")})),a.firstChild.lastChild.addEventListener("click",(function(){d.editName(t)})),a.firstChild.firstChild.addEventListener("change",(function(){r(a.firstChild.firstChild,t)})),a.lastChild.addEventListener("click",(function(){setTimeout((function(){g.deleteItem(t)}),200)}))},n=0;n<e.length;n+=1)t(n)}};const u=g;var m={container:document.getElementsByTagName("ul")[0],items:document.getElementsByTagName("li"),button:document.getElementsByClassName("button")[0]},v={updateStorage:function(e){for(var t=0;t<Object.keys(e).length;t+=1){var a=Object.keys(e)[t],n=localStorage.getItem(a)?localStorage.getItem(a).split(","):[];n.push(e[a]),localStorage.setItem(a,n)}v.createDOM()},sortStorage:function(){for(var e=localStorage.getItem("description")?localStorage.getItem("description").split(","):[],t=localStorage.getItem("status")?localStorage.getItem("status").split(","):[],a=localStorage.getItem("index")?localStorage.getItem("index").split(","):[],n=[],i=0;i<a.length;i+=1)n[i]=[e[i],t[i],a[i]];return n.sort((function(e,t){return e[2]>t[2]?1:-1})),n},createDOM:function(){var e=v.sortStorage();m.container.innerHTML="";for(var t=function(t){var a=document.createElement("li");a.draggable=!0;var n="true"===e[t][1]?"checked":"";a.innerHTML="<nav><input type='checkbox' ".concat(n," class='status' name='completed'><p>").concat(e[t][0],'</p></nav><i class="fas fa-ellipsis-v"></i><i class="fas fa-trash-alt invisible"></i>'),m.container.appendChild(a),a.addEventListener("dragstart",(function(){a.classList.add("ontop")})),a.addEventListener("drop",(function(){i(t)})),a.addEventListener("dragover",(function(e){s(e,a)})),a.addEventListener("dragleave",(function(){a.classList.remove("onbottom")})),a.firstChild.lastChild.addEventListener("click",(function(){d.editName(t)})),a.firstChild.firstChild.addEventListener("change",(function(){r(a.firstChild.firstChild,t)})),a.lastChild.addEventListener("click",(function(){setTimeout((function(){u.deleteItem(t)}),200)}))},a=0;a<e.length;a+=1)t(a);m.button.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),u.deleteChecked()}))}};const f=v;var p={addBtn:document.getElementsByClassName("fa-calendar-plus")[0],addField:document.getElementById("name-field")};const h=function(){if(""===p.addField.value)p.addField.classList.add("error-msg"),p.addField.setAttribute("placeholder","Please enter task description here");else{p.addField.classList.remove("error-msg"),p.addField.setAttribute("placeholder","Add to your list...");var e=localStorage.getItem("index")?localStorage.getItem("index").split(","):[],t=0===e.length?0:e.length,a={description:p.addField.value,status:!1,index:t};f.updateStorage(a),p.index+=1,p.addField.value=""}};document.getElementsByClassName("fa-calendar-plus")[0].addEventListener("click",(function(){h()})),f.createDOM()})();